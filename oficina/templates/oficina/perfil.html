{% extends 'oficina/base.html' %}
{% load static %}

{% block title %}Meu Perfil - MecanoSync{% endblock %}

{% block content %}
<div class="page active" style="padding: 2rem;">
    <div class="page-header" style="margin-bottom: 2rem;">
        <h1><i class="fas fa-user-circle"></i> Meu Perfil</h1>
    </div>

    <div class="perfil-container">
        <!-- Informações da Oficina -->
        <div class="card" style="margin-bottom: 2rem; padding: 2rem;">
        <h2><i class="fas fa-building"></i> Informações da Oficina</h2>
        <div class="info-grid">
            <div class="info-item">
                <label><i class="fas fa-store"></i> Nome</label>
                <p>{{ oficina.nome }}</p>
            </div>
            <div class="info-item">
                <label><i class="fas fa-id-card"></i> CNPJ</label>
                <p>{{ oficina.cnpj }}</p>
            </div>
            <div class="info-item">
                <label><i class="fas fa-phone"></i> Telefone</label>
                <p>{{ oficina.telefone|default:"Não informado" }}</p>
            </div>
            <div class="info-item">
                <label><i class="fas fa-envelope"></i> E-mail</label>
                <p>{{ oficina.email|default:"Não informado" }}</p>
            </div>
            <div class="info-item">
                <label><i class="fas fa-map-marker-alt"></i> Endereço</label>
                <p>{{ oficina.endereco|default:"Não informado" }}</p>
            </div>
            <div class="info-item">
                <label><i class="fas fa-city"></i> Cidade</label>
                <p>{{ oficina.cidade|default:"Não informado" }}</p>
            </div>
        </div>
    </div>

        <!-- Informações do Usuário -->
        <div class="card" style="margin-bottom: 2rem; padding: 2rem;">
            <h2><i class="fas fa-user"></i> Informações do Usuário</h2>
        <div class="info-grid">
            <div class="info-item">
                <label><i class="fas fa-user"></i> Nome de usuário</label>
                <p>{{ user.username }}</p>
            </div>
            <div class="info-item">
                <label><i class="fas fa-envelope"></i> E-mail</label>
                <p>{{ user.email|default:"Não informado" }}</p>
            </div>
            <div class="info-item">
                <label><i class="fas fa-calendar"></i> Membro desde</label>
                <p>{{ user.date_joined|date:"d/m/Y" }}</p>
            </div>
            <div class="info-item">
                <label><i class="fas fa-clock"></i> Último acesso</label>
                <p>{{ user.last_login|date:"d/m/Y H:i" }}</p>
            </div>
        </div>
    </div>

        <!-- Módulos Ativos -->
        <div class="card" style="margin-bottom: 2rem; padding: 2rem;">
            <h2><i class="fas fa-puzzle-piece"></i> Módulos Contratados</h2>
        <div class="modules-status">
            <div class="module-item {% if oficina.modulo_clientes %}active{% else %}inactive{% endif %}">
                {% if oficina.modulo_clientes %}
                    <i class="fas fa-check-circle" style="color: #28a745;"></i>
                {% else %}
                    <i class="fas fa-times-circle" style="color: #dc3545;"></i>
                {% endif %}
                <span>Módulo Clientes</span>
            </div>
            <div class="module-item {% if oficina.modulo_ordens %}active{% else %}inactive{% endif %}">
                {% if oficina.modulo_ordens %}
                    <i class="fas fa-check-circle" style="color: #28a745;"></i>
                {% else %}
                    <i class="fas fa-times-circle" style="color: #dc3545;"></i>
                {% endif %}
                <span>Módulo Ordens de Serviço</span>
            </div>
            <div class="module-item {% if oficina.modulo_faturamento %}active{% else %}inactive{% endif %}">
                {% if oficina.modulo_faturamento %}
                    <i class="fas fa-check-circle" style="color: #28a745;"></i>
                {% else %}
                    <i class="fas fa-times-circle" style="color: #dc3545;"></i>
                {% endif %}
                <span>Módulo Faturamento</span>
            </div>
            <div class="module-item {% if oficina.modulo_estoque %}active{% else %}inactive{% endif %}">
                {% if oficina.modulo_estoque %}
                    <i class="fas fa-check-circle" style="color: #28a745;"></i>
                {% else %}
                    <i class="fas fa-times-circle" style="color: #dc3545;"></i>
                {% endif %}
                <span>Módulo Estoque</span>
            </div>
            <div class="module-item {% if oficina.modulo_relatorios %}active{% else %}inactive{% endif %}">
                {% if oficina.modulo_relatorios %}
                    <i class="fas fa-check-circle" style="color: #28a745;"></i>
                {% else %}
                    <i class="fas fa-times-circle" style="color: #dc3545;"></i>
                {% endif %}
                <span>Módulo Relatórios</span>
            </div>
        </div>
    </div>

        <!-- Segurança -->
        <div class="card" style="padding: 2rem;">
            <h2><i class="fas fa-lock"></i> Segurança</h2>
            <p style="color: #666; margin-bottom: 1.5rem;">
                Mantenha sua conta segura alterando sua senha regularmente.
            </p>
            <a href="{% url 'alterar_senha' %}" class="btn btn-primary">
                <i class="fas fa-key"></i>
                Alterar Senha
            </a>
        </div>
    </div>
</div>

<style>
    .perfil-container {
        max-width: 1400px;
        margin: 0 auto;
    }

    .card {
        background: white;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        border: 1px solid #e9ecef;
    }

    .card h2 {
        margin: 0 0 1.5rem 0;
        color: #2c3e50;
        font-size: 1.25rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding-bottom: 1rem;
        border-bottom: 2px solid #f8f9fa;
    }

    .info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 2rem;
        margin-top: 1.5rem;
    }

    .info-item {
        padding: 1rem;
        background: #f8f9fa;
        border-radius: 8px;
        transition: transform 0.2s, box-shadow 0.2s;
    }

    .info-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }

    .info-item label {
        display: block;
        color: #6c757d;
        font-size: 0.875rem;
        margin-bottom: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .info-item label i {
        margin-right: 0.5rem;
        color: #0066cc;
    }

    .info-item p {
        color: #2c3e50;
        font-size: 1.1rem;
        margin: 0;
        font-weight: 500;
    }

    .modules-status {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.25rem;
        margin-top: 1.5rem;
    }

    .module-item {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 1.25rem;
        background: #f8f9fa;
        border-radius: 10px;
        font-weight: 500;
        border: 2px solid transparent;
        transition: all 0.2s;
    }

    .module-item.active {
        border-color: #28a745;
        background: #d4edda;
    }

    .module-item.inactive {
        border-color: #dc3545;
        background: #f8d7da;
    }

    .module-item:hover {
        transform: translateX(5px);
    }

    .module-item i {
        font-size: 1.5rem;
    }

    .page-header h1 {
        color: #2c3e50;
        font-size: 2rem;
        font-weight: 600;
    }
</style>
{% endblock %}
