{% extends 'oficina/base.html' %}

{% block title %}Detalhes da OS #{{ ordem.numero_os }} - MecanoSync{% endblock %}

{% block content %}
<div class="page active">
    <div class="page-header">
        <h1>Ordem de Serviço #{{ ordem.numero_os }}</h1>
        <div>
            <a href="{% url 'ordem_editar' ordem.pk %}" class="btn btn-primary">
                <i class="fas fa-edit"></i>
                Editar
            </a>
            <a href="{% url 'ordens_lista' %}" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i>
                Voltar
            </a>
        </div>
    </div>

    <div class="card">
        <div class="card-body">
            <div class="form-grid">
                <div class="form-group">
                    <label>Cliente</label>
                    <p><strong>{{ ordem.cliente.nome }}</strong></p>
                    <p>{{ ordem.cliente.telefone }}</p>
                </div>
                <div class="form-group">
                    <label>Veículo</label>
                    <p><strong>{{ ordem.veiculo }}</strong></p>
                    <p>Placa: {{ ordem.veiculo.placa }}</p>
                </div>
                <div class="form-group">
                    <label>Data de Entrada</label>
                    <p>{{ ordem.data_entrada|date:"d/m/Y" }}</p>
                </div>
                <div class="form-group">
                    <label>Previsão de Entrega</label>
                    <p>{{ ordem.data_previsao|date:"d/m/Y" }}</p>
                </div>
                <div class="form-group">
                    <label>Status</label>
                    <p><span class="badge-status {{ ordem.status }}">{{ ordem.get_status_display }}</span></p>
                </div>
                <div class="form-group">
                    <label>Valor Final</label>
                    <p><strong>R$ {{ ordem.valor_final|floatformat:2 }}</strong></p>
                </div>
                <div class="form-group full-width">
                    <label>Descrição do Problema</label>
                    <p>{{ ordem.descricao_problema }}</p>
                </div>
                {% if ordem.observacoes %}
                <div class="form-group full-width">
                    <label>Observações</label>
                    <p>{{ ordem.observacoes }}</p>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
